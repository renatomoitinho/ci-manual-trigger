name: CI

on:
  push:
    branches:
      - main
      
  workflow_dispatch:
    inputs:
      LION:
        type: boolean
        description: ü¶Å LION
      RHINO:
        type: boolean
        description: ü¶è RHINO
      HIPPO:
        type: boolean
        description: ü¶õ HIPPO
      PANDA:
        type: boolean
        description: üêº HIPPO
      ALL:
        type: boolean
        description: üêº HIPPO
      choice:
        type: choice
        description: Make a environment
        options:
         - DEV
         - PROD
      environment:
        type: environment
jobs:
  check-application:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: greet
        run: | 
          echo "choice is ${{ github.event.inputs.choice }}"
  
  deploy-application:
    if: ${{ github.event_name == 'workflow_dispatch' }}
    needs: check-application
    runs-on: ubuntu-latest
    steps:
    
    - name: Job to <<RHINO>>
      if: ${{  github.event.inputs.RHINO || github.event.inputs.ALL }}
      run: |
        echo "Log level: $NAMESPACE, env: $PROFILE"
      env:
        NAMESPACE: "RHINO"
        PROFILE: "${{ github.event.inputs.choice }}"

    - name: Job to <<LION>>
      if: ${{ github.event.inputs.LION || github.event.inputs.ALL }}
      run: |
        echo "Log level: $NAMESPACE, env: $PROFILE"
      env:
        NAMESPACE: "LION"
        PROFILE: "${{ github.event.inputs.choice }}"

    - name: Job to <<HIPPO>>
      if: ${{ github.event.inputs.HIPPO || github.event.inputs.ALL }}
      run: |
        echo "Log level: $NAMESPACE, env: $PROFILE"
      env:
        NAMESPACE: "HIPPO"
        PROFILE: "${{ github.event.inputs.choice }}"
  
    - name: Job to <<PANDA>>
      if: ${{ github.event.inputs.PANDA || github.event.inputs.ALL }}
      run: |
        echo "Log level: $NAMESPACE, env: $PROFILE"
      env:
        NAMESPACE: "PANDA"
        PROFILE: "${{ github.event.inputs.choice }}"
